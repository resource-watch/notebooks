{"id": "94e7e046-96d6-4084-9f4e-68c873431e27", "type": "dataset", "server": "https://api.resourcewatch.org", "attributes": {"name": "Predefined weights layers", "slug": "Predefined-weights-layers_2", "type": null, "subtitle": null, "application": ["aqueduct-water-risk"], "dataPath": null, "attributesPath": null, "connectorType": "rest", "provider": "cartodb", "userId": "5936af3802d342203186ab99", "connectorUrl": "https://wri-rw.carto.com/tables/water_risk_indicators_annual/public", "sources": [], "tableName": "water_risk_indicators_annual", "status": "saved", "published": true, "overwrite": false, "verified": false, "blockchain": {}, "mainDateField": null, "env": "production", "geoInfo": false, "protected": false, "legend": {"date": [], "region": [], "country": [], "nested": [], "integer": [], "short": [], "byte": [], "double": [], "float": [], "half_float": [], "scaled_float": [], "boolean": [], "binary": [], "text": [], "keyword": []}, "clonedHost": {}, "errorMessage": "", "taskId": null, "createdAt": "2019-10-10T14:08:41.553Z", "updatedAt": "2019-10-10T14:08:42.043Z", "dataLastUpdated": null, "metadata": [], "widget": [{"id": "c661165d-87da-4541-bbcf-0827b1889329", "type": "widget", "attributes": {"name": "Country rankings", "dataset": "94e7e046-96d6-4084-9f4e-68c873431e27", "slug": "Country-rankings", "userId": "5936af3802d342203186ab99", "description": "", "application": ["aqueduct-water-risk"], "verified": false, "default": false, "protected": false, "defaultEditableWidget": false, "published": true, "thumbnailUrl": "http://wri-api-backups.s3.amazonaws.com/resourcewatch/prod/thumbnails/c661165d-87da-4541-bbcf-0827b1889329-1570716535337.png", "freeze": false, "env": "production", "widgetConfig": {"params_config": [{"required": true, "key": "indicator"}], "data": [{"url": "https://wri-rw.carto.com/api/v2/sql?q=SELECT gid_0 as iso, name_0 as country, indicator_name, weight, score, score_ranked FROM aqueduct_results_v01_country_v06 WHERE indicator_name = {{indicator}} and weight in ('Tot', 'Irr', 'Dom', 'Ind', 'Pop') and score != -9999 ORDER BY score_ranked&hash=36395"}]}, "template": false, "createdAt": "2019-10-10T14:08:55.104Z", "updatedAt": "2019-10-10T14:08:55.104Z"}}], "layer": [{"id": "0d1d22eb-bbb9-446a-83a0-d30c5ea7d293", "type": "layer", "attributes": {"name": "Baseline water stress", "slug": "Baseline-water-stress", "dataset": "94e7e046-96d6-4084-9f4e-68c873431e27", "description": "", "application": ["aqueduct"], "iso": [], "provider": "cartodb", "userId": "5936af3802d342203186ab99", "default": false, "protected": false, "published": true, "env": "production", "layerConfig": {"account": "wri-rw", "params_config": [], "body": {"maxzoom": 18, "minzoom": 3, "layers": [{"type": "cartodb", "options": {"sql": "with r as (SELECT * FROM aqueduct_results_v01_country_v06 WHERE indicator_name = 'bws' and weight = 'Tot')\n\nSELECT a.the_geom, a.the_geom_webmercator, a.cartodb_id, r.gid_0, coalesce(NULLIF(r.name_0,''), 'No Data') as name_0, r.indicator_name, r.score, coalesce(r.cat, -9999) as cat, \n       (CASE WHEN label = 'NoData' THEN 'No Data' ELSE coalesce(NULLIF(r.label,''), 'No Data') END) as label\nFROM gadm_wri_0 a \nLEFT JOIN r on a.gid_0 = r.gid_0\nWHERE a.gid_0 != 'ATA'", "cartocss": "#layer{\n  polygon-fill:transparent;\n  polygon-opacity: 1;\n  line-color:transparent;\n  line-width: 1;\n  line-opacity: 1;\n}\n#layer [cat=4] { polygon-fill: #990000; line-color: #990000 }\n#layer [cat=3] { polygon-fill: #FF1900; line-color: #FF1900 }\n#layer [cat=2] { polygon-fill: #FF9900; line-color: #FF9900 }\n#layer [cat=1] { polygon-fill: #FFE600; line-color: #FFE600 }\n#layer [cat=0] { polygon-fill: #FFFF99; line-color: #FFFF99 }\n#layer [cat<-1] { polygon-fill: #4E4E4E; line-color:  #4E4E4E }\n\n#layer::boundaries{\n polygon-fill:transparent; polygon-opacity: 1; line-color:#CFCFCB; line-width: 2; line-opacity: 1;\n}", "cartocss_version": "2.3.0"}}]}}, "legendConfig": {"disclaimer": [{"color": "#4E4E4E", "name": "No data"}], "items": [{"color": "#FFFF99", "value": "(0-1)", "name": "Low"}, {"color": "#FFE600", "value": "(1-2)", "name": "Low-medium"}, {"color": "#FF9900", "value": "(2-3)", "name": "Medium-high"}, {"color": "#FF1900", "value": "(3-4)", "name": "High"}, {"color": "#990000", "value": "(4-5)", "name": "Extremely-high"}], "type": "choropleth"}, "interactionConfig": {"output": [{"column": "name_0", "format": null, "prefix": "", "property": "Country", "suffix": "", "type": "string"}, {"column": "label", "format": null, "prefix": "", "property": "Category", "suffix": "", "type": "string"}, {"column": "score", "format": null, "prefix": "", "property": "Score", "suffix": "", "type": "numeric"}]}, "applicationConfig": {}, "staticImageConfig": {}, "createdAt": "2019-10-10T14:08:45.554Z", "updatedAt": "2019-10-10T14:08:45.554Z"}}, {"id": "572026a1-b2f5-4287-9d7f-ba6e3f27db29", "type": "layer", "attributes": {"name": "Drought risk", "slug": "Drought-risk", "dataset": "94e7e046-96d6-4084-9f4e-68c873431e27", "description": "", "application": ["aqueduct"], "iso": [], "provider": "cartodb", "userId": "5936af3802d342203186ab99", "default": false, "protected": false, "published": true, "env": "production", "layerConfig": {"account": "wri-rw", "params_config": [], "body": {"maxzoom": 18, "minzoom": 3, "layers": [{"type": "cartodb", "options": {"sql": "with r as (SELECT * FROM aqueduct_results_v01_country_v06 WHERE indicator_name = 'drr' and weight = 'Tot')\n\nSELECT a.the_geom, a.the_geom_webmercator, a.cartodb_id, r.gid_0, coalesce(NULLIF(r.name_0,''), 'No Data') as name_0, r.indicator_name, r.score, coalesce(r.cat, -9999) as cat, \n       (CASE WHEN label = 'NoData' THEN 'No Data' ELSE coalesce(NULLIF(r.label,''), 'No Data') END) as label\nFROM gadm_wri_0 a \nLEFT JOIN r on a.gid_0 = r.gid_0\nWHERE a.gid_0 != 'ATA'", "cartocss": "#layer{\n  polygon-fill:transparent;\n  polygon-opacity: 1;\n  line-color:transparent;\n  line-width: 1;\n  line-opacity: 1;\n}\n#layer [cat=4] { polygon-fill: #990000; line-color: #990000 }\n#layer [cat=3] { polygon-fill: #FF1900; line-color: #FF1900 }\n#layer [cat=2] { polygon-fill: #FF9900; line-color: #FF9900 }\n#layer [cat=1] { polygon-fill: #FFE600; line-color: #FFE600 }\n#layer [cat=0] { polygon-fill: #FFFF99; line-color: #FFFF99 }\n#layer [cat<-1] { polygon-fill: #4E4E4E; line-color:  #4E4E4E }\n\n#layer::boundaries{\n polygon-fill:transparent; polygon-opacity: 1; line-color:#CFCFCB; line-width: 2; line-opacity: 1;\n}", "cartocss_version": "2.3.0"}}]}}, "legendConfig": {"disclaimer": [{"color": "#4E4E4E", "name": "No data"}], "items": [{"color": "#FFFF99", "value": "score: 0.0-0.2", "name": "Low"}, {"color": "#FFE600", "value": "score: 0.2-0.4", "name": "Low-medium"}, {"color": "#FF9900", "value": "score: 0.4-0.6", "name": "Medium"}, {"color": "#FF1900", "value": "score: 0.6-0.8", "name": "Medium-high"}, {"color": "#990000", "value": "score: 0.8-1.0", "name": "High"}], "type": "choropleth"}, "interactionConfig": {"output": [{"column": "name_0", "format": null, "prefix": "", "property": "Country", "suffix": "", "type": "string"}, {"column": "label", "format": null, "prefix": "", "property": "Category", "suffix": "", "type": "string"}, {"column": "score", "format": null, "prefix": "", "property": "Score", "suffix": "", "type": "numeric"}]}, "applicationConfig": {}, "staticImageConfig": {}, "createdAt": "2019-10-10T14:08:51.506Z", "updatedAt": "2019-10-10T14:08:51.506Z"}}, {"id": "d0cf86bb-3ca9-4129-80d8-fc0c490ff031", "type": "layer", "attributes": {"name": "Riverine flood risk", "slug": "Riverine-flood-risk", "dataset": "94e7e046-96d6-4084-9f4e-68c873431e27", "description": "", "application": ["aqueduct"], "iso": [], "provider": "cartodb", "userId": "5936af3802d342203186ab99", "default": false, "protected": false, "published": true, "env": "production", "layerConfig": {"account": "wri-rw", "params_config": [], "body": {"maxzoom": 18, "minzoom": 3, "layers": [{"type": "cartodb", "options": {"sql": "with r as (SELECT * FROM aqueduct_results_v01_country_v06 WHERE indicator_name = 'rfr' and weight = 'Pop')\n\nSELECT a.the_geom, a.the_geom_webmercator, a.cartodb_id, r.gid_0, coalesce(NULLIF(r.name_0,''), 'No Data') as name_0, r.indicator_name, r.score, coalesce(r.cat, -9999) as cat, \n       (CASE WHEN label = 'NoData' THEN 'No Data' ELSE coalesce(NULLIF(r.label,''), 'No Data') END) as label\nFROM gadm_wri_0 a \nLEFT JOIN r on a.gid_0 = r.gid_0\nWHERE a.gid_0 != 'ATA'", "cartocss": "#layer{\n  polygon-fill:transparent;\n  polygon-opacity: 1;\n  line-color:transparent;\n  line-width: 1;\n  line-opacity: 1;\n}\n#layer [cat=4] { polygon-fill: #990000; line-color: #990000 }\n#layer [cat=3] { polygon-fill: #FF1900; line-color: #FF1900 }\n#layer [cat=2] { polygon-fill: #FF9900; line-color: #FF9900 }\n#layer [cat=1] { polygon-fill: #FFE600; line-color: #FFE600 }\n#layer [cat=0] { polygon-fill: #FFFF99; line-color: #FFFF99 }\n#layer [cat<-1] { polygon-fill: #4E4E4E; line-color:  #4E4E4E }\n\n#layer::boundaries{\n polygon-fill:transparent; polygon-opacity: 1; line-color:#CFCFCB; line-width: 2; line-opacity: 1;\n}", "cartocss_version": "2.3.0"}}]}}, "legendConfig": {"disclaimer": [{"color": "#4E4E4E", "name": "No data"}], "items": [{"color": "#FFFF99", "value": "(0-1)", "name": "Low"}, {"color": "#FFE600", "value": "(1-2)", "name": "Low-medium"}, {"color": "#FF9900", "value": "(2-3)", "name": "Medium-high"}, {"color": "#FF1900", "value": "(3-4)", "name": "High"}, {"color": "#990000", "value": "(4-5)", "name": "Extremely-high"}], "type": "choropleth"}, "interactionConfig": {"output": [{"column": "name_0", "format": null, "prefix": "", "property": "Country", "suffix": "", "type": "string"}, {"column": "label", "format": null, "prefix": "", "property": "Category", "suffix": "", "type": "string"}, {"column": "score", "format": null, "prefix": "", "property": "Score", "suffix": "", "type": "numeric"}]}, "applicationConfig": {}, "staticImageConfig": {}, "createdAt": "2019-10-10T14:08:54.266Z", "updatedAt": "2019-10-10T14:08:54.266Z"}}], "vocabulary": [], "widgetRelevantProps": [], "layerRelevantProps": []}}