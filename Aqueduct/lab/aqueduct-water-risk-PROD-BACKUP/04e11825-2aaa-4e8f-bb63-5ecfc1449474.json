{"id": "04e11825-2aaa-4e8f-bb63-5ecfc1449474", "type": "dataset", "server": "https://api.resourcewatch.org", "attributes": {"name": "Predefined weights layers", "slug": "Predefined-weights-layers_3", "type": null, "subtitle": null, "application": ["aqueduct-water-risk"], "dataPath": null, "attributesPath": null, "connectorType": "rest", "provider": "cartodb", "userId": "5936af3802d342203186ab99", "connectorUrl": "https://wri-rw.carto.com/tables/water_risk_indicators_annual/public", "sources": [], "tableName": "water_risk_indicators_annual", "status": "saved", "published": true, "overwrite": false, "verified": false, "blockchain": {}, "mainDateField": null, "env": "production", "geoInfo": false, "protected": false, "legend": {"date": [], "region": [], "country": [], "nested": [], "integer": [], "short": [], "byte": [], "double": [], "float": [], "half_float": [], "scaled_float": [], "boolean": [], "binary": [], "text": [], "keyword": []}, "clonedHost": {}, "errorMessage": "", "taskId": null, "createdAt": "2019-10-10T14:09:19.287Z", "updatedAt": "2019-10-10T14:09:20.118Z", "dataLastUpdated": null, "metadata": [], "widget": [{"id": "e3eb7983-49df-47df-9fbe-fe9b5404c734", "type": "widget", "attributes": {"name": "Province rankings", "dataset": "04e11825-2aaa-4e8f-bb63-5ecfc1449474", "slug": "Province-rankings", "userId": "5936af3802d342203186ab99", "description": "", "application": ["aqueduct-water-risk"], "verified": false, "default": false, "protected": false, "defaultEditableWidget": false, "published": true, "thumbnailUrl": "http://wri-api-backups.s3.amazonaws.com/resourcewatch/prod/thumbnails/e3eb7983-49df-47df-9fbe-fe9b5404c734-1570716567173.png", "freeze": false, "env": "production", "widgetConfig": {"params_config": [{"required": true, "key": "indicator"}, {"required": true, "key": "iso"}], "data": [{"url": "https://wri-rw.carto.com/api/v2/sql?q=SELECT gid_0 as iso, name_0 as country, name_1 as province, indicator_name, weight, score, score_ranked FROM aqueduct_results_v01_province_v06 WHERE indicator_name = {{indicator}} and gid_0 = {{iso}} and weight in ('Tot', 'Irr', 'Dom', 'Ind', 'Pop') and score != -9999 ORDER BY score_ranked&hash=50497"}]}, "template": false, "createdAt": "2019-10-10T14:09:27.130Z", "updatedAt": "2019-10-10T14:09:27.130Z"}}], "layer": [{"id": "3249b91c-90ce-4526-89d8-f732cb68e2b1", "type": "layer", "attributes": {"name": "Baseline water stress", "slug": "Baseline-water-stress_1", "dataset": "04e11825-2aaa-4e8f-bb63-5ecfc1449474", "description": "", "application": ["aqueduct"], "iso": [], "provider": "cartodb", "userId": "5936af3802d342203186ab99", "default": false, "protected": false, "published": true, "env": "production", "layerConfig": {"account": "wri-rw", "params_config": [], "sql_config": [{"key": "and", "key_params": [{"key": "year", "required": true}, {"key": "scenario", "required": true}]}, {"key": "where", "key_params": [{"key": "iso", "required": false}, {"key": "crop", "required": false}, {"key": "irrigation", "required": false}, {"key": "rank", "required": false}]}], "body": {"maxzoom": 18, "minzoom": 3, "layers": [{"type": "cartodb", "options": {"sql": "with province as (SELECT * FROM aqueduct_results_v01_province_v06 WHERE indicator_name = 'bws' and weight = 'Tot'), \n      country as (SELECT 1000000 + cartodb_id as cartodb_id, the_geom, the_geom_webmercator, null as gid_1, gid_0 as iso, name_0, \n                         null as name_1, null as indicator_name, null::numeric as score, null::numeric as cat, null as label, null as isoc  \n                  FROM gadm_wri_0)\n\nSELECT * FROM country\nUNION ALL\nSELECT a.cartodb_id, a.the_geom, a.the_geom_webmercator,  r.gid_1, null as iso, coalesce(NULLIF(r.name_0,''), 'No Data') as name_0, \n       coalesce(NULLIF(r.name_1,''), 'No Data') as name_1, r.indicator_name, r.score, \n       coalesce(r.cat, -9999) as cat, \n       (CASE WHEN label = 'NoData' THEN 'No Data' ELSE coalesce(NULLIF(r.label,''), 'No Data') END) as label, r.gid_0 as isoc\nFROM gadm_wri a  \nLEFT JOIN province r on a.gid_1 = r.gid_1", "cartocss": "#layer{ polygon-comp-op:dst-atop; line-comp-op:dst-atop; polygon-fill:transparent;line-color:transparent;polygon-opacity: 1;  line-width: 1; line-opacity: 1;} #layer{ polygon-fill:ramp([cat], (#990000,#FF1900,#FF9900, #FFE600,#FFFF99,#4E4E4E,#4E4E4E), (4,3,2,1,0,-1,-9999), '='); \n        line-color:ramp([cat], (#990000,#FF1900,#FF9900, #FFE600,#FFFF99,#4E4E4E,#4E4E4E), (4,3,2,1,0,-1,-9999), '=');}\n\n#layer[iso!=null] {\n  polygon-fill:transparent; polygon-opacity: 1;\n line-color:#CFCFCB; line-width: 1; line-opacity: 1;polygon-comp-op:dst-over; \n\n}\n\n#layer[isoc='{{iso}}'] {\n line-color:#CFCFCB; line-width: 1; line-opacity: 1;  polygon-comp-op:dst-atop;\n\n}\n\n#layer[iso='{{iso}}'] { line-color:  #2e2c2c ;line-width: 1.5; polygon-opacity: 0;   line-comp-op:dst-over;}", "cartocss_version": "2.3.0"}}]}}, "legendConfig": {"disclaimer": [{"color": "#4E4E4E", "name": "No data"}], "items": [{"color": "#FFFF99", "value": "(0-1)", "name": "Low"}, {"color": "#FFE600", "value": "(1-2)", "name": "Low-medium"}, {"color": "#FF9900", "value": "(2-3)", "name": "Medium-high"}, {"color": "#FF1900", "value": "(3-4)", "name": "High"}, {"color": "#990000", "value": "(4-5)", "name": "Extremely-high"}], "type": "choropleth"}, "interactionConfig": {"output": [{"column": "name_0", "format": null, "prefix": "", "property": "Country", "suffix": "", "type": "string"}, {"column": "name_1", "format": null, "prefix": "", "property": "Province", "suffix": "", "type": "string"}, {"column": "label", "format": null, "prefix": "", "property": "Category", "suffix": "", "type": "string"}, {"column": "score", "format": null, "prefix": "", "property": "Score", "suffix": "", "type": "numeric"}]}, "applicationConfig": {}, "staticImageConfig": {}, "createdAt": "2019-10-10T14:09:21.941Z", "updatedAt": "2019-10-10T14:09:21.941Z"}}, {"id": "5d35b110-fbef-4442-a80b-bbb64382814d", "type": "layer", "attributes": {"name": "Drought risk", "slug": "Drought-risk_1", "dataset": "04e11825-2aaa-4e8f-bb63-5ecfc1449474", "description": "", "application": ["aqueduct"], "iso": [], "provider": "cartodb", "userId": "5936af3802d342203186ab99", "default": false, "protected": false, "published": true, "env": "production", "layerConfig": {"account": "wri-rw", "params_config": [], "sql_config": [{"key": "and", "key_params": [{"key": "year", "required": true}, {"key": "scenario", "required": true}]}, {"key": "where", "key_params": [{"key": "iso", "required": false}, {"key": "crop", "required": false}, {"key": "irrigation", "required": false}, {"key": "rank", "required": false}]}], "body": {"maxzoom": 18, "minzoom": 3, "layers": [{"type": "cartodb", "options": {"sql": "with province as (SELECT * FROM aqueduct_results_v01_province_v06 WHERE indicator_name = 'drr' and weight = 'Tot'), \n      country as (SELECT 1000000 + cartodb_id as cartodb_id, the_geom, the_geom_webmercator, null as gid_1, gid_0 as iso, name_0, \n                         null as name_1, null as indicator_name, null::numeric as score, null::numeric as cat, null as label, null as isoc  \n                  FROM gadm_wri_0)\n\nSELECT * FROM country\nUNION ALL\nSELECT a.cartodb_id, a.the_geom, a.the_geom_webmercator,  r.gid_1, null as iso, coalesce(NULLIF(r.name_0,''), 'No Data') as name_0, \n       coalesce(NULLIF(r.name_1,''), 'No Data') as name_1, r.indicator_name, r.score, \n       coalesce(r.cat, -9999) as cat, \n       (CASE WHEN label = 'NoData' THEN 'No Data' ELSE coalesce(NULLIF(r.label,''), 'No Data') END) as label, r.gid_0 as isoc\nFROM gadm_wri a  \nLEFT JOIN province r on a.gid_1 = r.gid_1", "cartocss": "#layer{ polygon-comp-op:dst-atop; line-comp-op:dst-atop; polygon-fill:transparent;line-color:transparent;polygon-opacity: 1;  line-width: 1; line-opacity: 1;} #layer{ polygon-fill:ramp([cat], (#990000,#FF1900,#FF9900, #FFE600,#FFFF99,#4E4E4E,#4E4E4E), (4,3,2,1,0,-1,-9999), '='); \n        line-color:ramp([cat], (#990000,#FF1900,#FF9900, #FFE600,#FFFF99,#4E4E4E,#4E4E4E), (4,3,2,1,0,-1,-9999), '=');}\n\n#layer[iso!=null] {\n  polygon-fill:transparent; polygon-opacity: 1;\n line-color:#CFCFCB; line-width: 1; line-opacity: 1;polygon-comp-op:dst-over; \n\n}\n\n#layer[isoc='{{iso}}'] {\n line-color:#CFCFCB; line-width: 1; line-opacity: 1;  polygon-comp-op:dst-atop;\n\n}\n\n#layer[iso='{{iso}}'] { line-color:  #2e2c2c ;line-width: 1.5; polygon-opacity: 0;   line-comp-op:dst-over;}", "cartocss_version": "2.3.0"}}]}}, "legendConfig": {"type": "choropleth", "items": [{"name": "Low", "value": "(0.0-0.2)", "color": "#FFFF99"}, {"name": "Low-medium", "value": "(0.2-0.4)", "color": "#FFE600"}, {"name": "Medium", "value": "(0.4-0.6)", "color": "#FF9900"}, {"name": "Medium-high", "value": "(0.6-0.8)", "color": "#FF1900"}, {"name": "High", "value": "(0.8-1.0)", "color": "#990000"}], "disclaimer": [{"name": "No data", "color": "#4E4E4E"}]}, "interactionConfig": {"output": [{"column": "name_0", "format": null, "prefix": "", "property": "Country", "suffix": "", "type": "string"}, {"column": "name_1", "format": null, "prefix": "", "property": "Province", "suffix": "", "type": "string"}, {"column": "label", "format": null, "prefix": "", "property": "Category", "suffix": "", "type": "string"}, {"column": "score", "format": null, "prefix": "", "property": "Score", "suffix": "", "type": "numeric"}]}, "applicationConfig": {}, "staticImageConfig": {}, "createdAt": "2019-10-10T14:09:24.242Z", "updatedAt": "2019-10-10T14:09:24.242Z"}}, {"id": "75cc563c-e751-45ec-9a9f-d86a9ec0703c", "type": "layer", "attributes": {"name": "Riverine flood risk", "slug": "Riverine-flood-risk_1", "dataset": "04e11825-2aaa-4e8f-bb63-5ecfc1449474", "description": "", "application": ["aqueduct"], "iso": [], "provider": "cartodb", "userId": "5936af3802d342203186ab99", "default": false, "protected": false, "published": true, "env": "production", "layerConfig": {"account": "wri-rw", "params_config": [], "sql_config": [{"key": "and", "key_params": [{"key": "year", "required": true}, {"key": "scenario", "required": true}]}, {"key": "where", "key_params": [{"key": "iso", "required": false}, {"key": "crop", "required": false}, {"key": "irrigation", "required": false}, {"key": "rank", "required": false}]}], "body": {"maxzoom": 18, "minzoom": 3, "layers": [{"type": "cartodb", "options": {"sql": "with province as (SELECT * FROM aqueduct_results_v01_province_v06 WHERE indicator_name = 'rfr' and weight = 'Pop'), \n      country as (SELECT 1000000 + cartodb_id as cartodb_id, the_geom, the_geom_webmercator, null as gid_1, gid_0 as iso, name_0, \n                         null as name_1, null as indicator_name, null::numeric as score, null::numeric as cat, null as label, null as isoc  \n                  FROM gadm_wri_0)\n\nSELECT * FROM country\nUNION ALL\nSELECT a.cartodb_id, a.the_geom, a.the_geom_webmercator,  r.gid_1, null as iso, coalesce(NULLIF(r.name_0,''), 'No Data') as name_0, \n       coalesce(NULLIF(r.name_1,''), 'No Data') as name_1, r.indicator_name, r.score, \n       coalesce(r.cat, -9999) as cat, \n       (CASE WHEN label = 'NoData' THEN 'No Data' ELSE coalesce(NULLIF(r.label,''), 'No Data') END) as label, r.gid_0 as isoc\nFROM gadm_wri a  \nLEFT JOIN province r on a.gid_1 = r.gid_1", "cartocss": "#layer{ polygon-comp-op:dst-atop; line-comp-op:dst-atop; polygon-fill:transparent;line-color:transparent;polygon-opacity: 1;  line-width: 1; line-opacity: 1;} #layer{ polygon-fill:ramp([cat], (#990000,#FF1900,#FF9900, #FFE600,#FFFF99,#4E4E4E,#4E4E4E), (4,3,2,1,0,-1,-9999), '='); \n        line-color:ramp([cat], (#990000,#FF1900,#FF9900, #FFE600,#FFFF99,#4E4E4E,#4E4E4E), (4,3,2,1,0,-1,-9999), '=');}\n\n#layer[iso!=null] {\n  polygon-fill:transparent; polygon-opacity: 1;\n line-color:#CFCFCB; line-width: 1; line-opacity: 1;polygon-comp-op:dst-over; \n\n}\n\n#layer[isoc='{{iso}}'] {\n line-color:#CFCFCB; line-width: 1; line-opacity: 1;  polygon-comp-op:dst-atop;\n\n}\n\n#layer[iso='{{iso}}'] { line-color:  #2e2c2c ;line-width: 1.5; polygon-opacity: 0;   line-comp-op:dst-over;}", "cartocss_version": "2.3.0"}}]}}, "legendConfig": {"disclaimer": [{"color": "#4E4E4E", "name": "No data"}], "items": [{"color": "#FFFF99", "value": "(0-1)", "name": "Low"}, {"color": "#FFE600", "value": "(1-2)", "name": "Low-medium"}, {"color": "#FF9900", "value": "(2-3)", "name": "Medium-high"}, {"color": "#FF1900", "value": "(3-4)", "name": "High"}, {"color": "#990000", "value": "(4-5)", "name": "Extremely-high"}], "type": "choropleth"}, "interactionConfig": {"output": [{"column": "name_0", "format": null, "prefix": "", "property": "Country", "suffix": "", "type": "string"}, {"column": "name_1", "format": null, "prefix": "", "property": "Province", "suffix": "", "type": "string"}, {"column": "label", "format": null, "prefix": "", "property": "Category", "suffix": "", "type": "string"}, {"column": "score", "format": null, "prefix": "", "property": "Score", "suffix": "", "type": "numeric"}]}, "applicationConfig": {}, "staticImageConfig": {}, "createdAt": "2019-10-10T14:09:26.209Z", "updatedAt": "2019-10-10T14:09:26.209Z"}}], "vocabulary": [], "widgetRelevantProps": [], "layerRelevantProps": []}}